#!/bin/bash

################################################################################
# resources                                                                    #
################################################################################

print_title "Copy resources"
cp ./{.exports,.functions,.aliases} ~/
mkdir -p ~/bin/
cp ./bin/* ~/bin/
rm ~/bin/{config-*,install.sh}

################################################################################
# bash profile                                                                 #
################################################################################

print_title "Configure bash"
cp ./.bashrc ~/
if [ $(cat ~/.bash_profile 2> /dev/null | grep .bashrc | wc -l) -eq 0 ]; then
    [ -f ~/.bash_profile ] && file_remove_str "\n# BEGIN: load .bashrc\n(.)*# END: load .bashrc\n" ~/.bash_profile --multiline
    [ -f ~/.bash_profile ] && cat << EOF >> ~/.bash_profile

EOF
    cat << EOF >> ~/.bash_profile
# BEGIN: load .bashrc
[[ -r ~/.bashrc ]] && source ~/.bashrc
# END: load .bashrc
EOF
fi

################################################################################
# zsh profile                                                                  #
################################################################################

print_title "Configure zsh"
cp ./.zshrc ~/

################################################################################
# Git                                                                          #
################################################################################

print_title "Configure Git"
git config --global user.name "$USER_NAME"
git config --global user.email "$USER_EMAIL"
git config --global push.default simple

################################################################################
# Vim                                                                          #
################################################################################

if [ -n "$(which vim)" ]; then
    print_title "Configure Vim"
    mkdir -p ~/.vim
    cp -Rf ./config/vim/{autoload,colors,plugin} ~/.vim
    cp -f ./config/vim/.vimrc ~
    if [ ! -d ~/.vim/bundle/Vundle.vim ]; then
        git clone https://github.com/gmarik/Vundle.vim.git ~/.vim/bundle/Vundle.vim > /dev/null 2>&1
    else
        (cd ~/.vim/bundle/Vundle.vim; git pull) > /dev/null 2>&1
    fi
fi

################################################################################
# Midnight Commander                                                           #
################################################################################

if [ -n "$(which mc)" ]; then
    print_title "Configure Midnight Commander"
    mkdir -p ~/.config/mc
    cp -f ./config/mc/* ~/.config/mc
fi

################################################################################
# Maven                                                                        #
################################################################################

if [ -n "$(which mvn)" ]; then
    print_title "Configure Maven"
    mkdir -p ~/.m2
    cp -f ./config/maven/settings*.xml ~/.m2
fi

################################################################################

exit 0
