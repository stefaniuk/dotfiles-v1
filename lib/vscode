#!/bin/bash

# ### Mac OS X #################################################################

function macosx-install-vscode {

    $cask_install \
        visual-studio-code
}

function macosx-config-vscode {

    dir=$DIR/Library/Application\ Support
    _config
}

# ### Ubuntu ###################################################################

function ubuntu-install-vscode {

    ver=$(www_get https://code.visualstudio.com/updates | grep 'linux-deb-x64' | egrep -o '[0-9]+\.[0-9]+\.[0-9]+' | sortvr | head -n 1)
    file_download \
        --url "https://vscode-update.azurewebsites.net/$ver/linux-deb-x64/stable" \
        --file "vscode-$ver.deb"
    sudo dpkg -i vscode-$ver.deb
    rm vscode-$ver.deb
}

function ubuntu-config-vscode {

    dir=$DIR/.config
    _config
}

# ### common ###################################################################

function _config {

    mkdir -p "$dir/Code/User"
    cp -fv $DIR/lib/resources/vscode/settings.json "$dir/Code/User"
}
